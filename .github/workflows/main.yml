name: Build WinDeck Nexus (x64)
on:
  workflow_dispatch:
jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Build Application (x64)
        run: |
          call "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Auxiliary\Build\vcvarsall.bat" x64
          rc.exe resources.rc
          cl.exe WinDeck-Nexus.cpp resources.res /std:c++17 /EHsc /D UNICODE /D _UNICODE /I"WebView2SDK\build\native\include" /link /LIBPATH:"WebView2SDK\build\native\x64" user32.lib shellapi.lib gdi32.lib XInput.lib advapi32.lib WebView2Loader.dll.lib /SUBSYSTEM:WINDOWS
        shell: cmd
      - name: Upload Build Artifact (x64)
        uses: actions/upload-artifact@v4
        with:
          name: WinDeck-Nexus-Build-x64
          path: |
            WinDeck-Nexus.exe
            WebView2SDK/build\native\x64\WebView2Loader.dll
